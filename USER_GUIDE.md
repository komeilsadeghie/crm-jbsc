# ุฑุงูููุง ฺฉุงุฑุจุฑ - CRM Media Coaching

## ๐ ูุญู ุฐุฎุฑู ุฏุชุงุจุณ

ุฏุชุงุจุณ SQLite ุฏุฑ ูุณุฑ ุฒุฑ ุฐุฎุฑู ูโุดูุฏ:

```
database/crm.db
```

**ูุณุฑ ุฏูู:**
- ุฏุฑ ูุญุท ุชูุณุนู: `./database/crm.db` (ุฏุฑ root ูพุฑูฺู)
- ุฏุฑ ูุญุท production: `./database/crm.db` (ุฏุฑ root ูพุฑูฺู)
- ูโุชูุงูุฏ ุจุง ุชูุธู ูุชุบุฑ ูุญุท `DB_PATH` ูุณุฑ ุฏูุฎูุงู ุฑุง ุชุนู ฺฉูุฏ

**ูฺฉุชู:** ูุงู `.db` ุฏุฑ `.gitignore` ูุฑุงุฑ ุฏุงุฑุฏ ู commit ููโุดูุฏ.

---

## ๐ค ุณุงุฎุช ฺฉุงุฑุจุฑ ุฌุฏุฏ

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ Script (ูพุดููุงุฏ)

```bash
npm run create-user
```

ุงู ุฏุณุชูุฑ ุงุฒ ุดูุง ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูโุฎูุงูุฏ:
- ูุงู ฺฉุงุฑุจุฑ
- ุงูู
- ุฑูุฒ ุนุจูุฑ
- ูุงู ฺฉุงูู (ุงุฎุชุงุฑ)
- ููุด (admin/user/staff) - ูพุดโูุฑุถ: user

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ API

#### 2.1. ุณุงุฎุช ฺฉุงุฑุจุฑ ุงุฒ ุทุฑู API Register (ุจุฑุง ููู)

```bash
POST /api/auth/register
Content-Type: application/json

{
  "username": "newuser",
  "email": "user@example.com",
  "password": "password123",
  "fullName": "ูุงู ฺฉุงูู ฺฉุงุฑุจุฑ",
  "role": "user"
}
```

#### 2.2. ุณุงุฎุช ฺฉุงุฑุจุฑ ุงุฒ ุทุฑู API Users (ููุท ุจุฑุง Admin)

ุงุจุชุฏุง ุจุงุฏ ุจุง ฺฉุงุฑุจุฑ admin ูุงฺฏู ฺฉูุฏ ู token ุฏุฑุงูุช ฺฉูุฏ:

```bash
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

ุณูพุณ ุจุง token ุฏุฑุงูุช:

```bash
POST /api/users
Authorization: Bearer YOUR_TOKEN
Content-Type: application/json

{
  "username": "newuser",
  "email": "user@example.com",
  "password": "password123",
  "full_name": "ูุงู ฺฉุงูู ฺฉุงุฑุจุฑ",
  "role": "user"
}
```

### ุฑูุด 3: ุณุงุฎุช ฺฉุงุฑุจุฑ ูพุดโูุฑุถ Admin

```bash
npm run init:db
```

ุงู ุฏุณุชูุฑ:
- ุฏุชุงุจุณ ุฑุง initialize ูโฺฉูุฏ
- ฺฉ ฺฉุงุฑุจุฑ admin ูพุดโูุฑุถ ูโุณุงุฒุฏ:
  - **ูุงู ฺฉุงุฑุจุฑ:** `admin`
  - **ุฑูุฒ ุนุจูุฑ:** `admin123`
  - **ุงูู:** `admin@crm.com`
  - **ููุด:** `admin`

**ูุดุฏุงุฑ:** ุงฺฏุฑ ฺฉุงุฑุจุฑ admin ุงุฒ ูุจู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุฏูุจุงุฑู ุณุงุฎุชู ููโุดูุฏ (INSERT OR IGNORE).

---

## ๐ง ุญู ูุดฺฉู CORS

ุงฺฏุฑ ุฎุทุง "CORS blocked" ุฏุฑุงูุช ูโฺฉูุฏ:

### ุฏุฑ Railway ุง Cloud Deployment:

1. **ุฑูุด 1:** ูุชุบุฑ ูุญุท `ALLOWED_ORIGINS` ุฑุง ุชูุธู ฺฉูุฏ:
   ```
   ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
   ```

2. **ุฑูุด 2:** ุงฺฏุฑ `ALLOWED_ORIGINS` ุชูุธู ูุดุฏู ุจุงุดุฏุ ููู origin ูุง ูุฌุงุฒ ูุณุชูุฏ (ุจุฑุง Railway ููุงุณุจ ุงุณุช).

### ุฏุฑ Local Development:

CORS ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฑุง `localhost` ูุนุงู ุงุณุช.

---

## ๐ ููุดโูุง ฺฉุงุฑุจุฑ

- **admin:** ุฏุณุชุฑุณ ฺฉุงูู ุจู ุณุณุชู
- **user:** ฺฉุงุฑุจุฑ ุนุงุฏ
- **staff:** ฺฉุงุฑููุฏ

---

## ๐ ุงููุช

- ุฑูุฒูุง ุนุจูุฑ ุจุง bcrypt hash ูโุดููุฏ
- ุงุฒ ุฑูุฒูุง ูู ุงุณุชูุงุฏู ฺฉูุฏ
- ฺฉุงุฑุจุฑ admin ูพุดโูุฑุถ ุฑุง ุชุบุฑ ุฏูุฏ
- ุฏุฑ production ุญุชูุงู `JWT_SECRET` ุฑุง ุชูุธู ฺฉูุฏ

